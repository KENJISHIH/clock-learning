<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°äºŒæ•¸å­¸ï¼šäº’å‹•æ™‚é˜å­¸ç¿’æ©Ÿ</title>
    <style>
        body {
            font-family: 'PingFang TC', 'Microsoft JhengHei', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f9ff;
            touch-action: none; /* é˜²æ­¢ iPad é é¢æ»‘å‹• */
        }

        h1 { color: #2c3e50; margin-bottom: 10px; }

        #clock-container {
            position: relative;
            width: 350px;
            height: 350px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border: 10px solid #3498db;
        }

        canvas {
            cursor: pointer;
            touch-action: none;
        }

        #digital-time {
            margin-top: 30px;
            font-size: 3rem;
            background: #34495e;
            color: #ecf0f1;
            padding: 10px 30px;
            border-radius: 15px;
            font-family: 'Courier New', Courier, monospace;
        }

        .instruction {
            margin-top: 15px;
            color: #7f8c8d;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>

    <h1>ğŸ•’ æˆ‘çš„å­¸ç¿’æ™‚é˜</h1>
    
    <div id="clock-container">
        <canvas id="clock" width="350" height="350"></canvas>
    </div>

    <div id="digital-time">12:00</div>
    
    <p class="instruction">ç”¨æ‰‹æŒ‡è½‰å‹• <b>é•·é‡</b> çœ‹çœ‹æ™‚é–“è®ŠåŒ–å–”ï¼</p>

    <script>
        const canvas = document.getElementById('clock');
        const ctx = canvas.getContext('2d');
        const digitalDisplay = document.getElementById('digital-time');
        
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = canvas.width / 2 - 20;

        let minutes = 0; // ç¸½åˆ†é˜æ•¸ (0 - 719)
        let isDragging = false;

        function drawClock() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 1. ç•«é˜é¢å¤–åœˆ
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 5;
            ctx.stroke();

            // 2. ç•«åˆ»åº¦
            for (let i = 0; i < 60; i++) {
                const angle = (i * 6) * (Math.PI / 180);
                const isHour = i % 5 === 0;
                const startR = radius - (isHour ? 15 : 7);
                ctx.beginPath();
                ctx.moveTo(centerX + Math.cos(angle) * startR, centerY + Math.sin(angle) * startR);
                ctx.lineTo(centerX + Math.cos(angle) * radius, centerY + Math.sin(angle) * radius);
                ctx.strokeStyle = isHour ? '#000' : '#999';
                ctx.lineWidth = isHour ? 4 : 2;
                ctx.stroke();
            }

            // 3. ç•«æ•¸å­—
            ctx.font = "bold 24px Arial";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.fillStyle = "#2c3e50";
            for (let i = 1; i <= 12; i++) {
                const angle = (i * 30 - 90) * (Math.PI / 180);
                const x = centerX + Math.cos(angle) * (radius - 35);
                const y = centerY + Math.sin(angle) * (radius - 35);
                ctx.fillText(i, x, y);
            }

            // è¨ˆç®—è§’åº¦
            const hourAngle = ((minutes / 720) * 360 - 90) * (Math.PI / 180);
            const minuteAngle = (((minutes % 60) / 60) * 360 - 90) * (Math.PI / 180);

            // 4. ç•«çŸ­é‡ (æ™‚é‡)
            drawHand(hourAngle, radius * 0.5, "#e74c3c", 8);

            // 5. ç•«é•·é‡ (åˆ†é‡)
            drawHand(minuteAngle, radius * 0.8, "#3498db", 5);

            // 6. ç•«ä¸­å¿ƒé»
            ctx.beginPath();
            ctx.arc(centerX, centerY, 8, 0, 2 * Math.PI);
            ctx.fillStyle = "#333";
            ctx.fill();

            updateDigital();
        }

        function drawHand(angle, length, color, width) {
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX + Math.cos(angle) * length, centerY + Math.sin(angle) * length);
            ctx.strokeStyle = color;
            ctx.lineWidth = width;
            ctx.lineCap = "round";
            ctx.stroke();
        }

        function updateDigital() {
            let h = Math.floor(minutes / 60);
            if (h === 0) h = 12;
            if (h > 12) h = h - 12;
            const m = Math.floor(minutes % 60);
            digitalDisplay.innerText = `${h}:${m < 10 ? '0' + m : m}`;
        }

        // è™•ç†äº’å‹•é‚è¼¯
        function handleInteraction(e) {
            const rect = canvas.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            
            const x = clientX - rect.left - centerX;
            const y = clientY - rect.top - centerY;
            
            // è¨ˆç®—è§¸æ§ä½ç½®çš„è§’åº¦ (0-360)
            let angle = Math.atan2(y, x) * (180 / Math.PI) + 90;
            if (angle < 0) angle += 360;

            // æ ¹æ“šé•·é‡ä½ç½®æ±ºå®šç¸½åˆ†é˜æ•¸
            // é€™è£¡æˆ‘å€‘éœ€è¦çŸ¥é“ç¾åœ¨æ˜¯ç¬¬å¹¾å€‹å°æ™‚
            let currentHour = Math.floor(minutes / 60);
            let newMinutes = Math.round((angle / 360) * 60);
            
            // è™•ç†è·¨è¶Š 12 é»çš„é‚è¼¯
            if (newMinutes === 60) newMinutes = 0;
            
            // ç°¡å–®çš„é˜²è·³è½‰é‚è¼¯ï¼šåˆ¤æ–·æ˜¯é †æ™‚é‡é‚„æ˜¯é€†æ™‚é‡
            const oldMin = minutes % 60;
            if (oldMin > 45 && newMinutes < 15) currentHour++;
            if (oldMin < 15 && newMinutes > 45) currentHour--;
            
            if (currentHour < 0) currentHour = 11;
            if (currentHour >= 12) currentHour = 0;

            minutes = currentHour * 60 + newMinutes;
            drawClock();
        }

        canvas.addEventListener('mousedown', () => isDragging = true);
        window.addEventListener('mouseup', () => isDragging = false);
        canvas.addEventListener('mousemove', (e) => {
            if (isDragging) handleInteraction(e);
        });

        // æ”¯æ´ iPad è§¸æ§
        canvas.addEventListener('touchstart', (e) => {
            isDragging = true;
            handleInteraction(e);
            e.preventDefault();
        }, {passive: false});

        canvas.addEventListener('touchmove', (e) => {
            if (isDragging) handleInteraction(e);
            e.preventDefault();
        }, {passive: false});

        canvas.addEventListener('touchend', () => isDragging = false);

        // åˆå§‹åŒ–
        drawClock();
    </script>
</body>
</html>